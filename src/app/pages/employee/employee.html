<div class="employee-container">
    <!-- Header Section -->
    <div class="employee-header">
        <h2 class="page-heading">Employee Management</h2>
        <button class="btn-add-employee" (click)="openModal()">
            <i class="bi bi-plus-circle"></i>
            <span>Add Employee</span>
        </button>
    </div>

    <!-- Employee Table -->
    <div class="table-container">
        <!-- <h2 align="center">Employee List</h2> -->
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Contact</th>
                    <th>Department</th>

                    <th>Role</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @for(employee of employeeList; track $index){
                <tr>



                    <td>{{employee.employeeId}}</td>
                    <td>
                        <div class="employee-name">
                            <i class="bi bi-person-circle text-primary"></i>
                            <span>{{employee.employeeName}}</span>
                        </div>
                    </td>
                    <td>{{employee.emailId}}</td>
                    <td>{{employee.contactNo}}</td>
                    <td><span class="badge bg-primary">{{employee.deptName}}</span></td>

                    <td><span class="badge bg-info">{{employee.role}}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-action btn-edit" title="Edit" >
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-action btn-delete" title="Delete" (click)="deleteEmp(employee.employeeId)">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                }



            </tbody>
        </table>
    </div>
</div>

<!-- Modal Popup -->
@if(isModalOpen){
<div class="modal-backdrop" (click)="closeModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <h3>Add New Employee</h3>
            <button class="btn-close" (click)="closeModal()">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        <div class="modal-body">
            <form class="employee-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="employeeName">Employee Name</label>
                        <input type="text" [(ngModel)]="employeeObj.employeeName" id="employeeName" class="form-control" placeholder="Enter full name" name="employeeName">
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" [(ngModel)]="employeeObj.emailId" id="email" class="form-control" placeholder="Enter email" name="emailId">
                    </div>
                 
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="contact">Contact Number</label>
                        <input type="tel" [(ngModel)]="employeeObj.contactNo" id="contact" class="form-control" placeholder="Enter contact number" name="contactNo" >
                    </div>
                    <div class="form-group">
                        <label for="department">Department</label>
                        <select [(ngModel)]="employeeObj.deptId" id="department" class="form-control" name="deptId">
                            <option value="">Select Department</option>
                            @for(dept of deptList$|async; track $index){
                                <option [value]="dept.deptId">{{dept.deptName}}</option>
                            }

                        
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="role">Role</label>
                        <select [(ngModel)]="employeeObj.role" id="role" class="form-control" name="role">
                            <option value="">Select Role</option>
                            @for(role of roleList$|async; track $index){
                                <option >{{role}}</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" [(ngModel)]="employeeObj.password" id="password" class="form-control" placeholder="Enter password" name="password">
                    </div>
                       <div class="form-group">
                        <label for="gender">Gender</label>
                        <select [(ngModel)]="employeeObj.gender" id="gender" class="form-control" name="gender">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" (click)="closeModal()">Cancel</button>
            <button class="btn-primary"(click)="onSaveEmployee()">Add Employee</button>
        </div>
    </div>
</div>
}